<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jobcho.mapper.TeamMapper">
	<cache />
	
	<!-- 팀 생성 -->	
	<insert id="insertTeam" parameterType="org.jobcho.domain.TeamVO">
		<![CDATA[ 
			insert into team(team_num, team_name, team_info, user_num) 
				values(
					team_num.nextval, #{team_name}, #{team_info}, #{user_num}
				)
			]]>
	</insert>
	
	<select id="getListTeam" parameterType="int" resultType="org.jobcho.domain.TeamVO">
		<![CDATA[
			select t.* from team t, member m
			where t.team_num = m.team_num
			and m.user_num = #{user_num}
			and t.islive = 1
		]]>
	</select>
	
	<select id="getTeam" parameterType = "int" resultType="org.jobcho.domain.TeamVO">
		select * from team where team_num = #{team_num}
	</select>
	
	<update id="updateTeam" parameterType="org.jobcho.domain.TeamVO">
		update team set team_name = #{team_name}, team_info = #{team_info}
		where team_num = #{team_num}
	</update>
	
	<update id="deleteTeam" parameterType="int">
		update team set islive = 0 where team_num = {team_num}
	</update>